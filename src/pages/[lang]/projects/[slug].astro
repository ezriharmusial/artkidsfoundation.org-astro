---
import { getCollection } from 'astro:content';

import BaseLayout from "../../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
	const siteProjects = await getCollection('projects');
	return siteProjects.map(project => {
		const [lang, slug] = project.slug.split('/')
		return {
			params: { lang, slug: slug || undefined },
			props: { project }
		}
	});
}

// 1. Get the slug from the incoming server request
const { project } = Astro.props;
// 2. Query for the page directly using the request slug
const { Content } = await project?.render() ;


//console.log('Page entry', slug, page)

---
<BaseLayout description={project.data?.description} title={project.data?.title} image={project.data?.image} imageAlt={project.data?.imageAlt}>

		<section class="bg-cover bg-center w-full" style="background-image: url('https://source.unsplash.com/random?Stage%20performance');">
			<div class="light:bg-white/75 dark:bg-black/75 md:p-28 p-6 pt-24 text-left">
				<div class="container mx-auto flex items-center">
					<div class="w-2/3 text-lg">
						<Content />
					</div>
					<div class="w-1/3 pl-16">
						<img src="https://source.unsplash.com/random?african%20popstar" class="h-72 w-3/4 object-cover rounded-xl" alt="Layout Image">
		  			</div>
				</div>
			</div>
		</section>

</BaseLayout>